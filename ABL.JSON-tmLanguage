{ "name": "OpenEdge ABL",
  "scopeName": "source.abl", 
  "fileTypes": ["p","i","cls"], 
  "patterns": [
    {
      "name": "comment.testing",
      "match": "comment:"
    },
    {
      "comment": "regular comment block.  todo - require space when compile, if yes then change to not highlight",
      "name": "comment.block.source.abl",
      "begin": "/\\*",
      "end": "\\*/",
      "patterns": [
        {
          "name": "comment.block.source.abl",
          "begin": "/\\*",
          "end": "\\*/"  
        }
      ]
    },
    
    {
      "name": "constant.testing",
      "match": "constant:"
    },
    {
      "comment": "numbers only - not for hex codes which never show up in ABL",
      "name": "constant.numeric.source.abl",
      "match": "\\b\\d+\\b"
    },
    {
      "comment": "html colors",
      "name": "constant.htmlColors.source.abl",
      "match": "#[0-9a-fA-F]{6}"
    },
    {
      "comment": "boolean conditions.",
      "name": "constant.character.source.abl",
      "match": "(?i)(=|eq|<|lt|>|gt|<=|lteq|>=|gteq|<>)"
    },
    {
      "comment": "math operators.",
      "name": "constatn.character.math.operator.source.abl",
      "match": "(|\\+|\\-|\\*|/)"
    },
    {
      "comment": "constants - simple list.  todo - any more to add?",
      "name": "constant.language.source.abl",
      "match": "(?i)\\b(and|false|no(?!-)|not|of|or|to|true|yes)\\b"
    },
    {
      "comment": "operators.",
      "name": "constant.languange.source.abl",
      "match": "(?i)\\b(and|not|or|to)\\b"
    },
    
    {
      "name": "entity.testing",
      "match": "entity:"
    },
    {
      "comment": "constructor/destructor method",
      "name": "meta.function.source.abl",
      "captures": {
        "1": { "name": "entity.name.function.abl" },
        "2": { "name": "storage.modifier.abl" },
        "3": { "name": "entity.name.hidden.abl"}
              },
      "match": "(?i)(constructor|destructor)\\s+(private|public)\\s+([a-z]+)"
    },
    {
      "comment": "function",
      "name": "meta.function.source.abl",
      "captures": {
        "1": { "name": "keyword.control.source.abl" },
        "2": { "name": "entity.name.function.abl" },
        "3": { "name": "keyword.other.source.abl" },
        "4": { "name": "storage.type.datatype.abl" }
      },
      "match": "(?i)(function)\\s+([a-z0-9_-]+)\\s(returns)\\s(character|logical|integer|int64)(\\s+)?(\\(|\\n)"
    },
    {
      "comment": "main block",
      "name": "meta.function.source.abl",
      "captures": {
        "1": { "name": "entity.name.function.abl"}
      },
      "match": "(?i)(main(\\-)?block):"
    },
    {
      "comment": "method",
      "name": "meta.function.source.abl",
      "captures": {
        "1": { "name": "keyword.control.source.abl" },
        "2": { "name": "storage.modifier.abl" },
        "3": { "name": "storage.type.datatype.abl" },
        "4": { "name": "entity.name.function.abl" }
      },
      "match": "(?i)(method)\\s+(private|public)\\s+([a-zA-Z]+)\\s+([a-zA-Z]+)"
    },
    {
      "comment": "procedure",
      "name": "meta.function.source.abl",
      "captures": {
        "1": { "name": "keyword.control.source.abl" },
        "2": { "name": "entity.name.function.abl" }
      },
      "match": "(?i)(procedure)\\s+([a-z0-9\\/_-]+)(:|\\(|\\n)"
    },
    
    {
      "name": "support.type.exception.testing",
      "match": "exception:"
    },

    {
      "name": "invalid.testing",
      "match": "invalid:"
    },
    
    {
      "name": "keyword.testing",
      "match": "keyword:"
    },
    {
      "comment": "control keywords.",
      "name": "keyword.control.source.abl",
      "match": "(?i)\\b(ambiguous|available|do:?|case|else|exclusive-lock|find\\s+(first|last)?|for\\s+(each|first|last)|if|no-error|no-lock|no-wait|otherwise|repeat|return|then|transaction:?|use-index|when|where|while)\\b"
    },

    {
      "comment": "frame keywords.",
      "name": "keyword.other.frames.source.abl",
      "match": "(?i)\\b(colon|cols|format|no-box|no-labels|label|initial|side-labels|skip|width|with)\\b"
    },
    {
      "comment": "general keywords.",
      "name": "keyword.other.statement.source.abl",
      "match": "(?i)\\b(assign|can-find(\\((first|last))?|create|delete|delimiter|disable|display|enable|export|import|input\\s+(from|close)|output\\s+(to|thru|through)|put|set|triggers for load of|unformatted|update)\\b"
    },
    {
      "comment": "class keywords.",
      "name": "keyword.other.class.source.abl",
      "match": "(?i)\\b(class|implements|inherits)\\b"
    },
    {
      "comment": "ends keywords.",
      "match": "(?i)(end)(\\s+(case|class|constructor|destructor|function|method|procedure))?\\.",
      "captures": {
        "1": {"name": "keyword.control.end.source.abl"},
        "2": {"name": "keyword.control.end.source.abl"}
      }
    },
    
    {
      "name": "punctuation.string.testing",
      "match": "punctuation:"
    },
    
    {
      "name": "storage.testing",
      "match": "storage:"
    },
    {
      "comment": "buffer",
      "match": "(?i)(define\\s+buffer)\\s+((b|bf)[A-Z][a-zA-Z0-9]+)\\s+(for)\\s+([a-zA-Z0-9-])+",
      "captures": {
        "1": {"name": "keyword.other.source.abl"},
        "2": {"name": "variable.property.abl"},
        "3": {"name": "variable.property.abl"},
        "4": {"name": "constant.other.source.abl"},
        "5": {"name": "text.other.source.abl"}
      }
    },
    {
      "comment": "parameters - for procedures",
      "match": "(?i)(define)\\s+(input|input-output|output)\\s+(parameter)\\s+((i|ip|io|o|op)[A-Z][a-zA-Z0-9]+)\\s+(as\\s+(character|decimal|integer|int64|logical)|(like)\\s+([a-zA-Z0-9-]+\\.[a-zA-Z0-9_-]+))(\\s+no-undo)?\\.",
      "captures": {
        "1": {"name": "keyword.other.source.abl"},
        "2": {"name": "keyword.other.source.abl"},
        "3": {"name": "keyword.other.source.abl"},
        "4": {"name": "variable.property.abl"},
        "5": {"name": "variable.property.abl"},
        "6": {"name": "constant.other.source.abl"},
        "7": {"name": "storage.type.source.abl"},
        "8": {"name": "consant.other.source.abl"},
        "9": {"name": "text.other.source.abl"},
        "10": {"name": "keyword.other.source.abl"}
      }
    },
    {
      "comment": "property",
      "match": "(?i)(define\\s+property)\\s+(p[A-Z][a-zA-Z0-9]+)\\s+(as)\\s+(character|decimal|integer|int64|logical)",
      "captures": {
        "1": {"name": "keyword.other.source.abl"},
        "2": {"name": "variable.property.abl"},
        "3": {"name": "constant.other.source.abl"},
        "4": {"name": "storage.type.source.abl"}
      }
    },
    {
      "comment": "property - getter and setter only",
      "match": "(?i)((private|protected|public)\\s+)?(get|set)(\\.)", 
      "captures": {
        "2": {"name": "storage.modifier.source.abl"},
        "3": {"name": "keyword.other.property.source.abl"}
      }
    },
    {
      "comment": "stream",
      "match": "(?i)(define\\s+stream)\\s+([a-zA-Z0-9]+)\\.",
      "captures": {
        "1": {"name": "keyword.other.source.abl"},
        "2": {"name": "variable.property.abl"}
      }
    },
    {
      "comment": "variable",
      "match": "(?i)(define\\s+((new\\s+)?shared\\s+)?variable)\\s+((lv|sv|v)[A-Z][a-zA-Z0-9]+)\\s+(as\\s+(character|decimal|integer|int64|logical)|(like)\\s+([a-zA-Z0-9-]+\\.[a-zA-Z0-9_-]+))(\\s+(format)\\s+[a-zA-Z0-9\\.,<>\\(\\)\"\"]+)?(\\s+(initial)\\s+[a-zA-Z0-9_\\.,<>\\(\\)\"\"]+)?(\\s+no-undo)?",
      "captures": {
        "1": {"name": "keyword.other.source.abl"},
        "2": {"name": "keyword.other.source.abl"},
        "3": {"name": "keyword.other.source.abl"},
        "4": {"name": "variable.property.abl"},
        "5": {"name": "variable.property.abl"},
        "6": {"name": "constant.other.source.abl"},
        "7": {"name": "storage.type.source.abl"},
        "8": {"name": "consant.other.source.abl"},
        "9": {"name": "text.other.source.abl"},
        "10": {"name": "string.double.source.abl"},
        "11": {"name": "keyword.other.source.abl"},
        "12": {"name": "text.other.source.abl"},
        "13": {"name": "keyword.other.source.abl"},
        "14": {"name": "keyword.other.source.abl"}
      }
    },
    {
      "name": "storage.type.define.abl",
      "match": "(?i)\\b(define\\s+(new\\s+)?(shared\\s+)?(temp-table|query|form))\\b"
    },

    {
      "name": "storage.type.source.abl",
      "match": "(?i)\\b(?<!&)(character|(?<!-)handle|dataset-handle|dataset|field|(?<!-)index|logical|integer|stream|frame [a-z]+)(?!\\s*\\()\\b"
    },

    {
      "name": "string.testing",
      "match": "string:"
    },
    {
      "comment": "Single quoted string",
      "match": "('(?:'|.)*?')",  
      "name": "string.single.source.abl"
    },

    {
      "comment": "Double quoted string",
      "name": "string.double.source.abl",
      "match": "\"\"[a-zA-Z0-9_\\.\\-]+\"\""
    },

    {
      "name": "support.testing",
      "match": "support:"
    },

    {
      "name": "variable.testing",
      "match": "variable:"
    },
    {
      "comment": "variable & properties - Synergy naming conventions",
      "name": "variable.other.synergy.source.abl",
      "match": "\\b(lv|p|sv|v)(-|[A-Z])[a-zA-Z0-9_-]+\\b"
    },
    {
      "comment": "paramaters - Synergy naming conventions",
      "name": "variable.parameter.synergy.source.abl",
      "match": "\\b(i|ip|o|op|io)(-|[A-Z])[a-zA-Z0-9_-]+\\b"
    },

 



    
    {
      "name": "string.double.complex.abl",
      "begin": "(\"(?!\"[a-zA-Z]+)|\"\"[a-zA-Z]+)",
      "end": "\"(?!\")",
      "patterns": [
        {
          "name": "constant.character.escape.abl",
          "match": "(~(x\\h{2}|[0-2][0-7]{,2}|3[0-6][0-7]|37[0-7]?|[4-7][0-7]?|.)|\"\")"
        }
      ]
    },

    

    
    
 

    {
      "name": "support.function.abl",
      "match": "(?i)(\\b[a-z][a-z0-9_-]*?\\b\\s*)(?=\\s*\\(.*?\\))",
      "captures": {
        "1": { "name": "support.function.source.abl" }
      }
    },

    {
      "name": "support.function.abl",
      "match": "(?i)\\b(run) ([a-z][a-z0-9_-]*?)\\b(\\s*\\(.*?\\))?",
      "captures": {
        "1": { "name": "keyword.statement.source.abl" },
        "2": { "name": "support.function.source.abl" }
      }
    },



    {
      "name": "meta.function.bracket.abl",
      "match": "(?i)(\\{[a-z0-9_\\./-]+)",
      "captures": {
        "1": { "name": "support.function.source.abl" }
      }
    },

    {
      "name": "meta.function.bracket.abl",
      "match": "\\}",
      "captures": {
        "0": { "name": "support.function.source.abl" }
      }
    }
  ],
  "uuid": "3bcebd60-f6cc-404f-930a-528f32956502"
}